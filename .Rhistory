color = var)) +
facet_wrap(var ~ .,
scales = "free_y",
strip.position = "top") +
scale_color_viridis(discrete = TRUE) +
theme(legend.position = "none") +
labs(x = "", y = "")
ggplotly(valcour_weather_plot)
valcour_weather_plot <- valcour_weather %>%
filter(!(timestamp == ymd_hms("2021-07-06 03:30:00") &
var == "wind_speed_mps")) %>% # remove erroneous value
ggplot() +
geom_line(aes(x = timestamp,
y = value,
color = var)) +
facet_wrap(var ~ .,
scales = "free_y",
ncol = 1,
strip.position = "top") +
scale_color_viridis(discrete = TRUE) +
theme(legend.position = "none") +
labs(x = "", y = "")
ggplotly(valcour_weather_plot)
latest_timestamp
latest_timestamp - 1
latest_timestamp - duration(1, units = "days")
last24_valcour_watertemp_plot <- valcour_watertemp %>%
filter(timestamp > (latest_timestamp - duration(1, units = "days")) %>%
ggplot() +
geom_line(aes(x = degC,
y = depth_m,
color = timestamp),
size = 1.5) +
scale_y_reverse() +
scale_color_viridis() +
labs(x = "Temperature (deg C)",
y = "Depth below water surface (m)")
ggplotly(last24_valcour_watertemp_plot)
last24_valcour_watertemp_plot <- valcour_watertemp %>%
filter(timestamp > (latest_timestamp - duration(1, units = "days"))) %>%
ggplot() +
geom_line(aes(x = degC,
y = depth_m,
color = timestamp),
size = 1.5) +
scale_y_reverse() +
scale_color_viridis() +
labs(x = "Temperature (deg C)",
y = "Depth below water surface (m)")
ggplotly(last24_valcour_watertemp_plot)
?scale_color_viridis
last24_valcour_watertemp_plot <- valcour_watertemp %>%
filter(timestamp > (latest_timestamp - duration(7, units = "days"))) %>%
ggplot() +
geom_line(aes(x = degC,
y = depth_m,
alpha = timestamp,
color = timestamp),
size = 1.5) +
scale_y_reverse() +
scale_color_viridis() +
labs(x = "Temperature (deg C)",
y = "Depth below water surface (m)")
last24_valcour_watertemp_plot
last24_valcour_watertemp_plot <- valcour_watertemp %>%
filter(timestamp > (latest_timestamp - duration(7, units = "days"))) %>%
ggplot() +
geom_line(aes(x = degC,
y = depth_m,
alpha = timestamp,
color = timestamp,
group = timestamp),
size = 1.5) +
scale_y_reverse() +
scale_color_viridis() +
labs(x = "Temperature (deg C)",
y = "Depth below water surface (m)")
last24_valcour_watertemp_plot
last24_valcour_watertemp_plot <- valcour_watertemp %>%
filter(timestamp > (latest_timestamp - duration(7, units = "days"))) %>%
ggplot() +
geom_line(aes(x = degC,
y = depth_m,
alpha = timestamp,
color = timestamp,
group = timestamp),
size = 1.5) +
scale_y_reverse() +
scale_color_viridis(labels = as_date()) +
labs(x = "Temperature (deg C)",
y = "Depth below water surface (m)")
last24_valcour_watertemp_plot <- valcour_watertemp %>%
filter(timestamp > (latest_timestamp - duration(7, units = "days"))) %>%
ggplot() +
geom_line(aes(x = degC,
y = depth_m,
alpha = timestamp,
color = timestamp,
group = timestamp),
size = 1.5) +
scale_y_reverse() +
scale_color_viridis(labels = as.Date) +
labs(x = "Temperature (deg C)",
y = "Depth below water surface (m)")
last24_valcour_watertemp_plot
last24_valcour_watertemp_plot <- valcour_watertemp %>%
filter(timestamp > (latest_timestamp - duration(7, units = "days"))) %>%
ggplot() +
geom_line(aes(x = degC,
y = depth_m,
alpha = timestamp,
color = timestamp,
group = timestamp),
size = 1.5) +
scale_y_reverse() +
scale_color_viridis(labels = ymd()) +
labs(x = "Temperature (deg C)",
y = "Depth below water surface (m)")
ggplotly(last24_valcour_watertemp_plot)
last24_valcour_watertemp_plot <- valcour_watertemp %>%
filter(timestamp > (latest_timestamp - duration(7, units = "days"))) %>%
ggplot() +
geom_line(aes(x = degC,
y = depth_m,
alpha = timestamp,
color = timestamp,
group = timestamp),
size = 1.5) +
scale_y_reverse() +
scale_color_viridis(option = "magma",
direction = -1) +
labs(x = "Temperature (deg C)",
y = "Depth below water surface (m)")
ggplotly(last24_valcour_watertemp_plot)
last24_valcour_watertemp_plot <- valcour_watertemp %>%
filter(timestamp > (latest_timestamp - duration(7, units = "days"))) %>%
ggplot() +
geom_line(aes(x = degC,
y = depth_m,
color = timestamp,
group = timestamp),
alpha = 0.4,
size = 1) +
scale_y_reverse() +
scale_color_viridis(option = "magma",
direction = -1) +
labs(x = "Temperature (deg C)",
y = "Depth below water surface (m)")
ggplotly(last24_valcour_watertemp_plot)
last24_valcour_watertemp_plot <- valcour_watertemp %>%
filter(timestamp > (latest_timestamp - duration(7, units = "days"))) %>%
ggplot() +
geom_line(aes(x = degC,
y = depth_m,
color = timestamp,
group = timestamp),
alpha = 0.4,
size = 1) +
scale_y_reverse() +
scale_color_viridis(option = "magma",
direction = -1,
labels = as.Date(origin = "1970-01-01")) +
labs(x = "Temperature (deg C)",
y = "Depth below water surface (m)")
last24_valcour_watertemp_plot <- valcour_watertemp %>%
filter(timestamp > (latest_timestamp - duration(7, units = "days"))) %>%
ggplot() +
geom_line(aes(x = degC,
y = depth_m,
color = timestamp,
group = timestamp),
alpha = 0.4,
size = 1) +
scale_y_reverse() +
scale_color_viridis(option = "magma",
direction = -1,
labels = as.Date(timestamp, origin = "1970-01-01")) +
labs(x = "Temperature (deg C)",
y = "Depth below water surface (m)")
last24_valcour_watertemp_plot <- valcour_watertemp %>%
filter(timestamp > (latest_timestamp - duration(7, units = "days"))) %>%
ggplot() +
geom_line(aes(x = degC,
y = depth_m,
color = timestamp,
group = timestamp),
alpha = 0.4,
size = 1) +
scale_y_reverse() +
scale_color_viridis(option = "magma",
direction = -1,
labels = as_date(timestamp, origin = "1970-01-01")) +
labs(x = "Temperature (deg C)",
y = "Depth below water surface (m)")
last24_valcour_watertemp_plot <- valcour_watertemp %>%
filter(timestamp > (latest_timestamp - duration(7, units = "days"))) %>%
ggplot() +
geom_line(aes(x = degC,
y = depth_m,
color = timestamp,
group = timestamp),
alpha = 0.4,
size = 1) +
scale_y_reverse() +
scale_color_viridis(option = "magma",
direction = -1,
labels = as_date) +
labs(x = "Temperature (deg C)",
y = "Depth below water surface (m)")
ggplotly(last24_valcour_watertemp_plot)
last24_valcour_watertemp_plot <- valcour_watertemp %>%
filter(timestamp > (latest_timestamp - duration(7, units = "days"))) %>%
ggplot() +
geom_line(aes(x = degC,
y = depth_m,
color = timestamp,
group = timestamp),
alpha = 0.4,
size = 1) +
scale_y_reverse() +
scale_color_viridis(option = "magma",
direction = -1,
labels = as_date()) +
labs(x = "Temperature (deg C)",
y = "Depth below water surface (m)")
last24_valcour_watertemp_plot <- valcour_watertemp %>%
filter(timestamp > (latest_timestamp - duration(7, units = "days"))) %>%
ggplot() +
geom_line(aes(x = degC,
y = depth_m,
color = timestamp,
group = timestamp),
alpha = 0.4,
size = 1) +
scale_y_reverse() +
scale_color_viridis(option = "magma",
direction = -1,
labels = as_date) +
labs(x = "Temperature (deg C)",
y = "Depth below water surface (m)")
ggplotly(last24_valcour_watertemp_plot)
last24_valcour_watertemp_plot <- valcour_watertemp %>%
filter(timestamp > (latest_timestamp - duration(7, units = "days"))) %>%
ggplot() +
geom_line(aes(x = degC,
y = depth_m,
color = timestamp,
group = timestamp),
alpha = 0.4,
size = 1) +
scale_y_reverse() +
scale_color_viridis(option = "magma",
direction = -1,
labels = date) +
labs(x = "Temperature (deg C)",
y = "Depth below water surface (m)")
ggplotly(last24_valcour_watertemp_plot)
?date
last24_valcour_watertemp_plot <- valcour_watertemp %>%
filter(timestamp > (latest_timestamp - duration(7, units = "days"))) %>%
ggplot() +
geom_line(aes(x = degC,
y = depth_m,
color = timestamp,
group = timestamp),
alpha = 0.4,
size = 1) +
scale_y_reverse() +
scale_color_viridis(option = "magma",
direction = -1,
labels = lubridate::date) +
labs(x = "Temperature (deg C)",
y = "Depth below water surface (m)")
ggplotly(last24_valcour_watertemp_plot)
last24_valcour_watertemp_plot <- valcour_watertemp %>%
filter(timestamp > (latest_timestamp - duration(7, units = "days"))) %>%
ggplot() +
geom_line(aes(x = degC,
y = depth_m,
color = timestamp,
group = timestamp),
alpha = 0.4,
size = 1) +
scale_y_reverse() +
scale_color_viridis(option = "magma",
direction = -1,
labels = date(origin = "1970-01-01")) +
labs(x = "Temperature (deg C)",
y = "Depth below water surface (m)")
date_labeller <- function(x){
as.Date(x, origin = '1970-01-01') %>%
date()
}
last24_valcour_watertemp_plot <- valcour_watertemp %>%
filter(timestamp > (latest_timestamp - duration(7, units = "days"))) %>%
ggplot() +
geom_line(aes(x = degC,
y = depth_m,
color = timestamp,
group = timestamp),
alpha = 0.4,
size = 1) +
scale_y_reverse() +
scale_color_viridis(option = "magma",
direction = -1,
labels = date_labeller) +
labs(x = "Temperature (deg C)",
y = "Depth below water surface (m)")
ggplotly(last24_valcour_watertemp_plot)
date_labeller <- function(x){
as.Date(x, origin = '1970-01-01') %>%
}
date_labeller <- function(x){
as.Date(x, origin = '1970-01-01')
}
last24_valcour_watertemp_plot <- valcour_watertemp %>%
filter(timestamp > (latest_timestamp - duration(7, units = "days"))) %>%
ggplot() +
geom_line(aes(x = degC,
y = depth_m,
color = timestamp,
group = timestamp),
alpha = 0.4,
size = 1) +
scale_y_reverse() +
scale_color_viridis(option = "magma",
direction = -1,
labels = date_labeller) +
labs(x = "Temperature (deg C)",
y = "Depth below water surface (m)")
ggplotly(last24_valcour_watertemp_plot)
last24_valcour_watertemp_plot
date_labeller <- function(x){
as.Date(x, origin = '1970-01-01') %>%
format(format = "%Y-%m-%d")
}
last24_valcour_watertemp_plot <- valcour_watertemp %>%
filter(timestamp > (latest_timestamp - duration(7, units = "days"))) %>%
ggplot() +
geom_line(aes(x = degC,
y = depth_m,
color = timestamp,
group = timestamp),
alpha = 0.4,
size = 1) +
scale_y_reverse() +
scale_color_viridis(option = "magma",
direction = -1,
labels = date_labeller) +
labs(x = "Temperature (deg C)",
y = "Depth below water surface (m)")
ggplotly(last24_valcour_watertemp_plot)
last24_valcour_watertemp_plot <- valcour_watertemp %>%
filter(timestamp > (latest_timestamp - duration(7, units = "days"))) %>%
ggplot() +
geom_line(aes(x = degC,
y = depth_m,
color = timestamp,
group = timestamp),
alpha = 0.4,
size = 1) +
scale_y_reverse() +
scale_color_viridis(option = "magma",
direction = -1,
labels = as.POSIXct) +
labs(x = "Temperature (deg C)",
y = "Depth below water surface (m)")
ggplotly(last24_valcour_watertemp_plot)
date_labeller <- function(x){
as.POSIXct(x, origin = '1970-01-01')
}
timestamp_labeller <- function(x){
as.POSIXct(x, origin = '1970-01-01')
}
last24_valcour_watertemp_plot <- valcour_watertemp %>%
filter(timestamp > (latest_timestamp - duration(7, units = "days"))) %>%
ggplot() +
geom_line(aes(x = degC,
y = depth_m,
color = timestamp,
group = timestamp),
alpha = 0.4,
size = 1) +
scale_y_reverse() +
scale_color_viridis(option = "magma",
direction = -1,
labels = timestamp_labeller) +
labs(x = "Temperature (deg C)",
y = "Depth below water surface (m)")
ggplotly(last24_valcour_watertemp_plot)
timestamp_labeller <- function(x){
as.POSIXct(x, origin = '1970-01-01') %>%
format("%m-%d")
}
last_week_valcour_watertemp_plot <- valcour_watertemp %>%
filter(timestamp > (latest_timestamp - duration(7, units = "days"))) %>%
ggplot() +
geom_line(aes(x = degC,
y = depth_m,
color = timestamp,
group = timestamp),
alpha = 0.4,
size = 1) +
scale_y_reverse() +
scale_color_viridis(option = "magma",
direction = -1,
labels = timestamp_labeller) +
labs(x = "Temperature (deg C)",
y = "Depth below water surface (m)")
ggplotly(last24_valcour_watertemp_plot)
timestamp_labeller <- function(x){
as.POSIXct(x, origin = '1970-01-01') %>%
date()
}
last_week_valcour_watertemp_plot <- valcour_watertemp %>%
filter(timestamp > (latest_timestamp - duration(7, units = "days"))) %>%
ggplot() +
geom_line(aes(x = degC,
y = depth_m,
color = timestamp,
group = timestamp),
alpha = 0.4,
size = 1) +
scale_y_reverse() +
scale_color_viridis(option = "magma",
direction = -1,
labels = timestamp_labeller) +
labs(x = "Temperature (deg C)",
y = "Depth below water surface (m)")
ggplotly(last24_valcour_watertemp_plot)
timestamp_labeller <- function(x){
date(as.POSIXct(x, origin = '1970-01-01'))
}
last_week_valcour_watertemp_plot <- valcour_watertemp %>%
filter(timestamp > (latest_timestamp - duration(7, units = "days"))) %>%
ggplot() +
geom_line(aes(x = degC,
y = depth_m,
color = timestamp,
group = timestamp),
alpha = 0.4,
size = 1) +
scale_y_reverse() +
scale_color_viridis(option = "magma",
direction = -1,
labels = timestamp_labeller) +
labs(x = "Temperature (deg C)",
y = "Depth below water surface (m)")
ggplotly(last24_valcour_watertemp_plot)
(latest_timestamp - duration(7, units = "days"))
(latest_timestamp - duration(7, units = "days")) %>% date()
((latest_timestamp - duration(day_window, units = "days")) %>% date()) : (latest_timestamp %>% date())
# enter number of days to look back:
day_window <- 7
# enter number of days to look back:
((latest_timestamp - duration(day_window, units = "days")) %>% date()) : (latest_timestamp %>% date())
dbreaks <- ((latest_timestamp - duration(day_window, units = "days")) %>% date()) : (latest_timestamp %>% date())
day_window <- 7
timestamp_labeller <- function(x){
as.POSIXct(x, origin = '1970-01-01')
}
latest_timestamp %>%
date()
dbreaks <- ((latest_timestamp - duration(day_window, units = "days")) %>% date()) : (latest_timestamp %>% date())
last_week_valcour_watertemp_plot <- valcour_watertemp %>%
filter(timestamp > (latest_timestamp - duration(day_window, units = "days"))) %>%
ggplot() +
geom_line(aes(x = degC,
y = depth_m,
color = timestamp,
group = timestamp),
alpha = 0.4,
size = 1) +
scale_y_reverse() +
scale_color_viridis(option = "magma",
direction = -1,
labels = timestamp_labeller,
breaks = dbreaks) +
labs(x = "Temperature (deg C)",
y = "Depth below water surface (m)")
ggplotly(last24_valcour_watertemp_plot)
dbreaks
as_date(dbreaks)
dbreaks <- ((latest_timestamp - duration(day_window, units = "days")) %>% date()) : (latest_timestamp %>% date()) %>%
as_date()
dbreaks
# enter number of days to look back:
day_window <- 7
timestamp_labeller <- function(x){
as.POSIXct(x, origin = '1970-01-01')
}
latest_timestamp %>%
date()
dbreaks <- ((latest_timestamp - duration(day_window, units = "days")) %>% date()) : (latest_timestamp %>% date()) %>%
as_date()
last_week_valcour_watertemp_plot <- valcour_watertemp %>%
filter(timestamp > (latest_timestamp - duration(day_window, units = "days"))) %>%
ggplot() +
geom_line(aes(x = degC,
y = depth_m,
color = timestamp,
group = timestamp),
alpha = 0.4,
size = 1) +
scale_y_reverse() +
scale_color_viridis(option = "magma",
direction = -1,
labels = timestamp_labeller,
breaks = dbreaks) +
labs(x = "Temperature (deg C)",
y = "Depth below water surface (m)")
ggplotly(last24_valcour_watertemp_plot)
